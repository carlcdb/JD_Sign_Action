name: JD_Sign_Action

on:
  repository_dispatch:
  release:
    types: published
  # push:
  #   branches:
  #     - master
  schedule:
    - cron: 0 20 * * *
  watch:
    types: started
    
env:
  JD_COOKIE: ${{ secrets._octo=GH1.1.1548587736.1572861596; _ga=GA1.2.1199758253.1572861598; _device_id=d91213ca7db6eadeb26009749bdc3c93; has_recent_activity=1; tz=Etc%2FGMT%2B8; user_session=y51rqm4jTimsCBi3d0dE-mLlJ39r3qyMPvh0MIQepySVpfGX; __Host-user_session_same_site=y51rqm4jTimsCBi3d0dE-mLlJ39r3qyMPvh0MIQepySVpfGX; tz=Etc%2FGMT%2B8; color_mode=%7B%22color_mode%22%3A%22light%22%2C%22light_theme%22%3A%7B%22name%22%3A%22light%22%2C%22color_mode%22%3A%22light%22%7D%2C%22dark_theme%22%3A%7B%22name%22%3A%22dark%22%2C%22color_mode%22%3A%22dark%22%7D%7D; logged_in=yes; dotcom_user=carlcdb; _gh_sess=RVix%2FrCycCbmy4S0w3mDun4%2BK5i9goq9JMtcgqifUAwVjEpW6Ra3fpCdpZiaEJEmDx93EzjesuhYxxOCcUy3O6M2vPv39b9nBbxigZVE2IGM0ExbwvnKcJWOPShj5dst41Ds8yB2ZryV3MbWs%2FPx77tmilm1Vd08TSIC9gSpi4%2FPRj075vubGlK0WyqK%2BENtkzCOScG2%2FuXRsHL5jzcN5NPFrBKiL%2Bl6JIVLhyCP6LwB0mXRs4Qu32HK8HqxNHH2N2OfjAEJZFORWPWeK8r6tfhSDoY065XGB0UK9ZSF0NIW6FfjFYd4iyd1L7C8ida98%2FZhzjzaIop34UV%2BpEatXggqdDVJiAY0k2LH3NnTTAxqtb4tgc3PXxu70uQVyItib41tlPHKszrLQYp3nznyEclPeTKTzSnSpO9SYA9cBnNT4VkreC3FBz8h%2Fhkcj%2BjKdI8RG4ofby7IuGyN9ubIB1mjvGvOyfqbtJyrvM4S1UznsQpr3FpPtjigKnmkMWbKQzaOif1HCyvOlltkznjlCBRqry0y9PJC4K9BbeNPb9vP7Gt9zT4cnAIa6Rz9FPX%2BIHVMocrZayopYbkjQp1e2z%2BlrR4SVACQizYfWu05NIO9QO0W0gyoA0lswYzi96DbwTq3p6vVNfoHAJipTqnuAScXu3wivIdz4SjTutyR5wmIxWlWiLhwLyc7V7vOlppApiL5OWCxHIeRrNxnT0aMdDdyOr2wV7u6CLvVDRpBY3GGAy9TL9jVlL46r8pd5Pris2rL9zCmI7qdAUQO22SgCHu%2FD7k6o1bi6dqPhNMOmQqA2MJA2wyUd%2BVobFik9KuwJaHsbVwBQ%2BX%2B0dsUuZ12SDkX6mPl1RXoiezelENTDbSN0jVUJML8ZfEPUJc2NNSqRPjQmUiOdjgYuA2Lxr2XnoQKQel5cuCGT5qLrIvJVuuyLEFrHXa401zupZaRhx%2FaCPKW%2FDLzq%2B5C1n%2F6rrSHA8jTmsuxV3%2FESovPlbOikacv2GRTWHsCovz2YG7G3QmSPHRUZ3%2Fdjo9Rx5E6f61SWXsRYtnwcKYvr3eX%2FGAmhvt3fnPyB0kwNnSBcdBOE90tz3WdZMdwtebCH4yKsEdXxrLLVCGFObEgo9c5YqDlBinLO%2B0HzfWMraekbaf7aLne030sS17QzdefeXn0sL1HIheO8lKZ1EqRkjd0xbVfJrgdhXV8%2Fw0%2FL7%2B8ocXmd%2FAlMxRNkovblM5ez9emlLkC3nvftJ4GMr2J7ifgc8zX85xKuBWLj1Spefth17AQkHbdsTiJoIsnbCw%2FZaLTdvKX2vYUONjJSMXv%2Bs15RfSu81HgHZqkKBi1udD%2FDOw%2FHb1c%2Fc1A2n9F7IutZ2des0mPTS4WHTRuC8eELWDjhEO0hGCSv4EphTSdKAbkYBtWeg1WJV9Nm8VFoc8AdkF%2BJncWdxpz8OKzx4rGNp3sy39uaBwSsQo%2BQHLMMO8PruA4o9sfeEC2t6UGXyt6imTPj%2Fk1algq%2FskfKiB5xPXCnmZxpWCWj2J5Zt27jZWwz8pduMphLH2NjEzRgIQUe9yjxBCMbEdRAL%2FMZDXz2EArAB2LpaE%3D--dhWuI99qQ%2FJFJ6gA--ZP0fA7bt5yZS0cFIUTWvog%3D%3D;  }}
  PUSH_KEY: ${{ secrets.SCU164290T8ee5922757cc3e3a7963dcc84b45e9e0604732c78e84e }}
  UPLOAD_BESULT_DIR: true

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout codes
              uses: actions/checkout@v2
              
            - name: Use Node.js
              uses: actions/setup-node@v1
              with:
                node-version: '12.x'
                
            - name: Run install
              run: npm install
              
            - name: Run Script
              run: node jd_sign.js
                
            - name: Upload result file
              uses: actions/upload-artifact@master
              if: env.UPLOAD_BESULT_DIR == 'true'
              with:
                name: result
                path: ./*.txt


